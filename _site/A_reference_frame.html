<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>SPECFEM3D_Cartesian</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=e01eaeac25bebaede87fee4bc75f9f27dc55c330">
  </head>
  <body>
    <section class="page-header">
      <div class="parallax"><!-- parallax -->
        <div class="parallax_layer parallax_layer_back">
          <div class="img_background img1"></div>
        </div>
      <!-- </div> -->
      <div class="parallax_layer parallax_layer_front">
        <h1 class="project-name">SPECFEM3D_Cartesian</h1>
        <h2 class="project-tagline">SPECFEM3D_Cartesian simulates acoustic (fluid), elastic (solid), coupled acoustic/elastic, poroelastic or seismic wave propagation in any type of conforming mesh of hexahedra (structured or not.)
</h2>
        
          <a href="http://github.com/danielpeter/specfem3d" class="btn">View on GitHub</a>
        
        
      </div><!-- end of parallax -->
    </section>

    <section class="main-content">
      <p><strong>Table of Contents</strong></p>

<ul>
  <li><a href="#reference-frame-convention">Reference Frame Convention</a>
    <ul>
      <li><a href="#source-and-receiver-locations">Source and receiver locations</a></li>
      <li><a href="#seismogram-outputs">Seismogram outputs</a></li>
    </ul>
  </li>
</ul>

<h1 id="reference-frame-convention">Reference Frame Convention</h1>

<p>The code uses the following convention for the Cartesian reference frame:</p>

<ul>
  <li>
    <p>the (x) axis points East</p>
  </li>
  <li>
    <p>the (y) axis points North</p>
  </li>
  <li>
    <p>the (z) axis points up</p>
  </li>
</ul>

<p>Note that this convention is different from both the Aki and Richards (1980) convention and the Harvard Centroid-Moment Tensor (CMT) convention. The Aki &amp; Richards convention is</p>

<ul>
  <li>
    <p>the (x) axis points North</p>
  </li>
  <li>
    <p>the (y) axis points East</p>
  </li>
  <li>
    <p>the (z) axis points down</p>
  </li>
</ul>

<p>and the Harvard CMT convention is</p>

<ul>
  <li>
    <p>the (x) axis points South</p>
  </li>
  <li>
    <p>the (y) axis points East</p>
  </li>
  <li>
    <p>the (z) axis points up</p>
  </li>
</ul>

<h3 id="source-and-receiver-locations">Source and receiver locations</h3>

<p>The SPECFEM3D Cartesian software code internally uses Cartesian coordinates. The given locations for sources and receiver locations thus may get converted. Sources and receiver locations are read in from the <code class="highlighter-rouge">CMTSOLUTION</code> (or <code class="highlighter-rouge">FORCESOLUTION</code>) and <code class="highlighter-rouge">STATIONS</code> files. Note that e.g. the <code class="highlighter-rouge">CMTSOLUTION</code> and <code class="highlighter-rouge">FORCESOLUTION</code> files denotes the location by longitude/latitude/depth. We read in longitude as (x) coordinate, latitude as (y) coordinate.</p>

<p>In case the flag <code class="highlighter-rouge">SUPPRESS_UTM_PROJECTION</code> is set to <code class="highlighter-rouge">.false.</code> in the main parameter file (see Chapter [cha:Creating-Distributed-Databases]), the (x)/(y) coordinates have to be given in degrees and are converted to Cartesian coordinates using a UTM conversion with the specified UTM zone.</p>

<p>The value for depth (given in (km) in <code class="highlighter-rouge">CMTSOLUTION</code> and <code class="highlighter-rouge">FORCESOLUTION</code>) or burial depth (given in (m) in <code class="highlighter-rouge">STATIONS</code>) is evaluated with respect to the surface of the mesh at the specified (x)/(y) location to find the corresponding (z) coordinate. It is possible to use this depth value directly as (z) coordinate by changing the flag <code class="highlighter-rouge">USE_SOURCES_RECVS_Z</code> to <code class="highlighter-rouge">.true.</code> in the file <code class="highlighter-rouge">constants.h</code> located in the <code class="highlighter-rouge">src/shared/</code> subdirectory.</p>

<h3 id="seismogram-outputs">Seismogram outputs</h3>

<p>The seismogram output directions are given in Cartesian (x)/(y)/(z) directions and not rotated any further. Changing flags in <code class="highlighter-rouge">constants.h</code> in the <code class="highlighter-rouge">src/shared/</code> subdirectory only rotates the seismogram outputs if receivers are forced to be located at the surface (<code class="highlighter-rouge">RECVS_CAN_BE_BURIED_EXT_MESH</code> set to <code class="highlighter-rouge">.false.</code>) and the normal to the surface at the receiver location should be used (<code class="highlighter-rouge">EXT_MESH_RECV_NORMAL</code> set to <code class="highlighter-rouge">.true.</code>) as vertical. In this case, the outputs are rotated to have the vertical component normal to the surface of the mesh, (x) and (y) directions are somewhat arbitrary orthogonal directions along the surface.</p>

<p>For the labeling of the seismogram channels, see Appendix [cha:channel-codes]. Additionally, we add labels to the synthetics using the following convention: For a receiver station located in an</p>

<p><span>elastic domain:</span></p>
<ul>
  <li>
    <p><code class="highlighter-rouge">semd</code> for the displacement vector</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">semv</code> for the velocity vector</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">sema</code> for the acceleration vector</p>
  </li>
</ul>

<p><span>acoustic domain:</span><br />
(please note that receiver stations in acoustic domains must be buried. This is due to the free surface condition which enforces a zero pressure at the surface.)</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">semd</code> for the displacement vector</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">semv</code> for the velocity vector</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">sema</code> for pressure which will be stored in the vertical component <code class="highlighter-rouge">Z</code>. Note that pressure in the acoustic media is isotropic and thus the pressure record would be the same in the other two component directions. We therefore use the other two seismogram components to store the acoustic potential in component <code class="highlighter-rouge">X</code> (or <code class="highlighter-rouge">N</code>) and the first time derivative of the acoustic potential in component <code class="highlighter-rouge">Y</code> (or <code class="highlighter-rouge">E</code>).</p>
  </li>
</ul>

<p>The seismograms are by default written out in ASCII-format to the <code class="highlighter-rouge">OUTPUT_FILES/</code> subdirectory by each parallel process. You can change this behavior by changing the following flags in the <code class="highlighter-rouge">constants.h</code> file located in the <code class="highlighter-rouge">src/shared/</code> subdirectory:</p>

<p><span><code class="highlighter-rouge">SEISMOGRAMS_BINARY</code></span><br />
set to <code class="highlighter-rouge">.true.</code> to have seismograms written out in binary format.</p>

<p><span><code class="highlighter-rouge">WRITE_SEISMOGRAMS_BY_MASTER</code></span><br />
Set to <code class="highlighter-rouge">.true.</code> to have only the master process writing out seismograms. This can be useful on a cluster, where only the master process node has access to the output directory.</p>

<p><span><code class="highlighter-rouge">USE_OUTPUT_FILES_PATH</code></span><br />
Set to <code class="highlighter-rouge">.false.</code> to have the seismograms output to <code class="highlighter-rouge">LOCAL_PATH</code> directory specified in the main parameter file <code class="highlighter-rouge">DATA/Par_file</code>.</p>

<h2 id="references">References</h2>

<p>Aki, K., and P. G. Richards. 1980. <em>Quantitative Seismology, Theory and Methods</em>. San Francisco, USA: W. H. Freeman.</p>

<hr />
<blockquote>
  <p>This documentation has been automatically generated by <a href="http://www.pandoc.org">pandoc</a>
based on the User manual (LaTeX version) in folder doc/USER_MANUAL/
(Mar 10, 2020)</p>
</blockquote>


    </section>

    <section class="page-footer">
      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/danielpeter/specfem3d">specfem3d</a> is maintained by <a href="http://github.com/danielpeter">danielpeter</a></span>
        
        <span class="site-footer-credits">generated by <a href="https://pages.github.com">GitHub Pages</a></span>
      </footer>
    </section>

    
  </body>
</html>
